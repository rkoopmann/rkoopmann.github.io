<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>calculating average time (duration)</title>
  <meta name="description" content="this is summarizes my response to a thread on the SAS Discussion Forums.">

  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
  
  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  

  <link rel="stylesheet" type="text/css" href="/css/tufte.css">
  <!-- <link rel="stylesheet" type="text/css" href="/css/print.css" media="print"> -->

  <link rel="canonical" href="http://localhost:4000/sas/2009/07/10/average-duration.html">

  <link rel="alternate" type="application/rss+xml" title="hi" href="http://localhost:4000/feed.xml" />
</head>

  <body>
    <!--- Header and nav template site-wide -->
<header>
    <nav class="group">
	<a href="/"><img class="badge" src="/assets/img/badge_1.png" alt="CH"></a>
	
		
		    
		      <a href="/about/">About</a>
		    
	    
  	
		
		    
		      <a href="/sas/feed.json"></a>
		    
	    
  	
		
		    
		      <a href="/"></a>
		    
	    
  	
		
		    
		      <a href="/css/print.css"></a>
		    
	    
  	
		
  	
		
  	
		
		    
		      <a href="/assets/main.css"></a>
		    
	    
  	
		
		    
		      <a href="/feed.xml"></a>
		    
	    
  	
	</nav>
</header>

    <article class="group">
      <h1>calculating average time (duration)</h1>
<p class="subtitle">July 10, 2009</p>

<p><strong>this is summarizes <a href="http://support.sas.com/forums/message.jspa?messageID=23047#23047">my response</a> to <a href="http://support.sas.com/forums/thread.jspa?threadID=6386">a thread</a> on the <a href="http://support.sas.com/forums/index.jspa">SAS Discussion Forums</a>.</strong></p>

<!--more-->

<p>in the <a href="http://support.sas.com/forums/message.jspa?messageID=22993#22993">original post</a>, the poster wanted “…to calculate the length of time (mean, median, and mode) between when a record was created (“date reported” in my database) and when that same record was returned (“date closed” in my database).”</p>

<p>in a <a href="http://support.sas.com/forums/message.jspa?messageID=23001#23001">follow-up post</a>, the original poster used an analogy of watching a particular TV channel. that is, “…when a person turned on the channel and when they turned off the channel.”</p>

<p>so i set up some fake data to work the problem out.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>data EventData;
    format EventID 8. EventOpenDT EventCloseDT datetime.;
    do EventID=1 to 1000;
        EventOpenDT =dhms('01jul2009'd, 0, 0, floor(ranuni(123)*24*60*60));
        EventCloseDT=dhms('02jul2009'd, 0, 0, floor(ranuni(456)*24*60*60));
        output;
    end;
run;
</code></pre>
</div>

<p>the discussion then turned to <a href="http://support.sas.com/forums/message.jspa?messageID=23004#23004">SUMMARY/MEANS procs</a> and <a href="http://support.sas.com/forums/message.jspa?messageID=23006#23006">exactly how date, time, and datetime values are derived in SAS</a>. at the risk of stating the obvious, i think the other posters missed the main issue the original poster had: trying to calculate the average difference between two datetimes vs. calculating the diference between the average of two datetimes. the duration needs to be calculated for each record in the raw data before summarizing. <a href="http://support.sas.com/forums/message.jspa?messageID=23012#23012">one poster implied this</a>, but never explicitly stated it.</p>

<p>step 1: calculate duration for raw data</p>

<div class="highlighter-rouge"><pre class="highlight"><code>data EventData;
    set EventData;
    EventDuration=intck('dthour', EventOpenDT, EventCloseDT);
run;
</code></pre>
</div>

<p>step 2: summarize duration</p>

<div class="highlighter-rouge"><pre class="highlight"><code>proc univariate data=eventdata noprint;
    var eventduration;
    output out=EventSummary n=N mode=Mode mean=Mean median=Median;
run;

proc print noobs;
run;
</code></pre>
</div>

<p>results</p>

<div class="highlighter-rouge"><pre class="highlight"><code>N      Mean     Median    Mode
1000    23.945      24       25
</code></pre>
</div>



    </article>
    <span class="print-footer">calculating average time (duration) - July 10, 2009 - </span>


    <footer>
  <hr class="slender">
  <ul class="footer-links">
    <li><a href="mailto:hate@spam.net"><span class="icon-mail"></span></a></li>    
      
  </ul>
<div class="credits">
<span>&copy; 2017 &nbsp;&nbsp;</span></br> <br>
<span>This site created with the <a href="//github.com/clayh53/tufte-jekyll">Tufte theme for  </a> in <a href="//jekyllrb.com">Jekyll</a>.</span> 
</div>  
</footer>

  </body>
</html>
