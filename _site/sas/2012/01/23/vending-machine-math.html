<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>vending machine math</title>
  <meta name="description" content="Last week, Andy from NOTE: introduced me to code katas. Then he posted his first one: vending machine math.">

  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
  
  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  

  <link rel="stylesheet" type="text/css" href="/css/tufte.css">
  <!-- <link rel="stylesheet" type="text/css" href="/css/print.css" media="print"> -->

  <link rel="canonical" href="http://localhost:4000/sas/2012/01/23/vending-machine-math.html">

  <link rel="alternate" type="application/rss+xml" title="hi" href="http://localhost:4000/feed.xml" />
</head>

  <body>
    <!--- Header and nav template site-wide -->
<header>
    <nav class="group">
	<a href="/"><img class="badge" src="/assets/img/badge_1.png" alt="CH"></a>
	
		
		    
		      <a href="/about/">About</a>
		    
	    
  	
		
		    
		      <a href="/sas/feed.json"></a>
		    
	    
  	
		
		    
		      <a href="/"></a>
		    
	    
  	
		
		    
		      <a href="/css/print.css"></a>
		    
	    
  	
		
  	
		
  	
		
		    
		      <a href="/assets/main.css"></a>
		    
	    
  	
		
		    
		      <a href="/feed.xml"></a>
		    
	    
  	
	</nav>
</header>

    <article class="group">
      <h1>vending machine math</h1>
<p class="subtitle">January 23, 2012</p>

<p>Last week, Andy from <a href="http://www.notecolon.info">NOTE:</a> introduced me to <a href="http://www.notecolon.info/2012/01/code-katas.html">code katas</a>. Then he posted his first one: vending machine math.</p>

<!--more-->

<blockquote>
  <p>Imagine you have to write some code for a vending machine. You are given a) the price of the product to be vended, and b) the amount of money tendered by the customer. Your task is to deduce what change to offer, i.e. how many of each type of coin. Optimise your result by minimising the number of coins given in change. Assume your vending machine has unlimited stocks of the following denomination: 1p, 2p, 5p, 10p, 20p, 50p, £1, £2.</p>
</blockquote>

<p>here’s my solution</p>

<div class="highlighter-rouge"><pre class="highlight"><code>data _null_;
    array coin(8);
    array value(8) _temporary_ (1,2,5,10,20,50,100,200);

    call missing (of coin: coincount total);

    input tendered price;
    owed = tendered - price;

    put 'Price:'  @12 price
    / 'Tendered:' @12 tendered
    / 'Change due:';

    do i = dim(coin) to 1 by -1 until (owed=0);
        do until (owed &lt; value[i]);
            if owed &gt;= value[i] then do;
                coin[i]+1;
                owed=owed-value[i];
            end;
        end;
    end;

    do i = dim(coin) to 1 by -1;
    coin[i] = max(0,coin[i]);
    coincount + coin[i];
    subtotal = value[i] * coin[i];
    total + subtotal;
    put @6 value[i] 3.-r @10 'x' @12 coin[i] @14 '=' @16 subtotal 3.-r;
    end;

    put @11 '--- -----'
    / @10 coincount 3.-r @14 total 5.-r
    ///;

datalines;
100 70
80 63
200 45
200 11
run;
</code></pre>
</div>
<p>log, using UK coinage</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Price:     70
Tendered:  100
Change due:
     200 x 0 =   0
     100 x 0 =   0
      50 x 0 =   0
      20 x 1 =  20
      10 x 1 =  10
       5 x 0 =   0
       2 x 0 =   0
       1 x 0 =   0
          --- -----
           2    30

Price:     63
Tendered:  80
Change due:
     200 x 0 =   0
     100 x 0 =   0
      50 x 0 =   0
      20 x 0 =   0
      10 x 1 =  10
       5 x 1 =   5
       2 x 1 =   2
       1 x 0 =   0
          --- -----
           3    17

Price:     45
Tendered:  200
Change due:
     200 x 0 =   0
     100 x 1 = 100
      50 x 1 =  50
      20 x 0 =   0
      10 x 0 =   0
       5 x 1 =   5
       2 x 0 =   0
       1 x 0 =   0
          --- -----
           3   155

Price:     11
Tendered:  200
Change due:
     200 x 0 =   0
     100 x 1 = 100
      50 x 1 =  50
      20 x 1 =  20
      10 x 1 =  10
       5 x 1 =   5
       2 x 2 =   4
       1 x 0 =   0
          --- -----
           7   189
</code></pre>
</div>

<p>it’s pretty simple to change to US coinage by changing the following statements (i know there are 50 cent pieces, but i’ve never seen a vending machine use them):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>array coin(5); 
array value(5) _temporary_ (1,5,10,25,100);
</code></pre>
</div>

<p>partial log, using US coinage</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Price:     70
Tendered:  100
Change due:
     100 x 0 =   0
      25 x 1 =  25
      10 x 0 =   0
       5 x 1 =   5
       1 x 0 =   0
          --- -----
           2    30

Price:     63
Tendered:  80
Change due:
     100 x 0 =   0
      25 x 0 =   0
      10 x 1 =  10
       5 x 1 =   5
       1 x 2 =   2
          --- -----
           4    17
</code></pre>
</div>



    </article>
    <span class="print-footer">vending machine math - January 23, 2012 - </span>


    <footer>
  <hr class="slender">
  <ul class="footer-links">
    <li><a href="mailto:hate@spam.net"><span class="icon-mail"></span></a></li>    
      
  </ul>
<div class="credits">
<span>&copy; 2017 &nbsp;&nbsp;</span></br> <br>
<span>This site created with the <a href="//github.com/clayh53/tufte-jekyll">Tufte theme for  </a> in <a href="//jekyllrb.com">Jekyll</a>.</span> 
</div>  
</footer>

  </body>
</html>
